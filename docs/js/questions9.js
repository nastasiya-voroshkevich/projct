let geometr =  [
  {
    question: "1. По гепотенузе прямоугольного треугольника со сторанами 12 см, 16 см, 20 см, перемещается точка. Найдите, при каком положении точки сумма квадратов расстояний от этой точки до катетов будет наименьшей. Определите расстояние от этого положения точки до вершины прямото угла. ",
    answers: [
      {
        id: "1",
        value: " 9,6 cм",
        correct: true,
      },
      {
        id: "2",
        value: " 8,4 см",
        correct: false,
      },
      {
        id: "3",
        value: " 11,2 см",
        correct: false,
      },
    ],
    id: '1.',
  },
  {
    question:
      "2. В трапеции ABCD боковая сторона AB = 8, расстояние от середины боковой стороны CD до прямой AB равно 10 см. Найдите площадь трапеции.",
    answers: [
      {
        id: "4",
        value: "85 см<sup><small>2</small></sup>",
        correct: false,
      },
      {
        id: "5",
        value: "60 см<sup><small>2</small></sup>",
        correct: false,
      },
      {
        id: "6",
        value: "80 см<sup><small>2</small></sup>",
        correct: true,
      },
    ],
    id: '2.',
  }, 

{
  question:
    "3. В треугольнике АВС проведена медиана ВМ, точка F - ее середина. Прямая СF пересекает стороку АВ в точке К. Площадь четырехугольника AKFM равна 50 см<sup><small>2</small></sup>. Нaйдите площадь треугольника АВС.",
  answers: [
    {
      id: "7",
      value: "86 см<sup><small>2</small></sup>",
      correct: false,
    },
    {
      id: "8",
      value: "160 см<sup><small>2</small></sup>",
      correct: false,
    },
    {
      id: "9",
      value: "120 см<sup><small>2</small></sup>",
      correct: true,
    },
  ],
  id: '3.',
},
{
  question:
    "4. Стороны одного из двух подобных треугольников равны 6 см и 12 см, другого - 12 см и 18 см. Найдите неизвестные стороны каждого из треугольников, если коэффициент подобия 2-го треугольника 1-му целое число. ",
  answers: [
    {
      id: "10",
      value: "9 см и 24 см ",
      correct: true,
    },
    {
      id: "11",
      value: "10 см и 26 см ",
      correct: false,
    },
    {
      id: "12",
      value: "8 см и 22 см",
      correct: false,
    },
  ],
  id: '4.',
},
{
  question:
    "5. Точки М, N и K - соответственно середины сторон АВ, ВС и АС треугольника АВС, MN : KN : MK = 5 : 3 : 4, Р<sub><small>ABC</small></sub> = 48 см. Найдите площадь треугольника АВС. ",
  answers: [
    {
      id: "13",
      value: "86 см<sup><small>2</small></sup>",
      correct: false,
    },
    {
      id: "14",
      value: "96 см<sup><small>2</small></sup> ",
      correct: true,
    },
    {
      id: "15",
      value: "104 см<sup><small>2</small></sup>",
      correct: false,
    },
  ],
  id: '5.',
},
{
  question:
    "6. Дан прямоугольник АВСD с площадью 210 см<sup><small>2</small></sup> . На стороне АD взята точка К, на стороне С - точка М так, что AK : KD = 2 : 1, CM : MD = 2 : 3. Отрезки АМ и ВК пересекаются в точке Р. Найдите площадь треугольника АРК. ",
  answers: [
    {
      id: "16",
      value: "28 cм<sup><small>2</small></sup> ",
      correct: false,
    },
    {
      id: "17",
      value: "20 см<sup><small>2</small></sup>",
      correct: true,
    },
    {
      id: "18",
      value: "30 см<sup><small>2</small></sup>",
      correct: false,
    },
  ],
  id: '6.',
},

{
question:
  "7. Стороны треугольника равны 6 см, 7 см и 8 см. Найдите длины отрезков, на которые биссектриса среднего по величине угла треугольника делит противолежащую сторону. ",
answers: [
  {
    id: "19",
    value: "4 см и 5 см ",
    correct: false,
  },
  {
    id: "20",
    value: "2 см и 3 см ",
    correct: false,
  },
  {
    id: "21",
    value: "3 см и 4 см",
    correct: true,
  },
],
id: '7.',
},

{
question:
  "8. Диагонали трапеции взаимно перпендикулярны и равны 6 и 8. Найдите длину отрезка, соединяющего середины оснований. ",
answers: [
  {
    id: "22",
    value: "7 ",
    correct: false,
  },
  {
    id: "23",
    value: "5 ",
    correct: true,
  },
  {
    id: "24",
    value: "6 ",
    correct: false,
  },
],
id: '8.',
},
{
question:
  "9. Окружность с центром О вписана в уголо ВАС, В и С - точки касания. Отрезки АО и ВС пересекаются в точке К, ОК = 2 см, ОВ = 4 см. Найдите длину отрезка АК. ",
answers: [
  {
    id: "4 см",
    value: "",
    correct: false,
  },
  {
    id: "23",
    value: "5 см ",
    correct: false,
  },
  {
    id: "24",
    value: "6 см ",
    correct: true,
  },
],
id: '9.',
},
{
question:
  "10. На координатной плоскости задана окружность с центром Р(3;2) и радиусом, равным 2. Из точки А(-2;0) к окружности проведена касательная, отличная от оси абсцисс, которая касается окружности в точке В. НАйдите площадь треугольника АРВ.",
answers: [
  {
    id: "25",
    value: " 4 кв. единиц",
    correct: false,
  },
  {
    id: "26",
    value: "5 кв. единиц ",
    correct: true,
  },
  {
    id: "27",
    value: "6 кв. единиц ",
    correct: false,
  },
],
id: '10.',
},
]

const linkTest = (array) => {
  let localResults = {};
  let localResultsAnswer = {};
  const renderQuestions = (index) => {
    renderIndicator(index + 1);

    questions.dataset.currentStep = index;

    if (array[index].answers.length === 3) {
      const renderAnswers = () =>
        array[index].answers
          .map(
            (answer) => `<li>
      <label for="">
        <input type="radio" class="answer-input" id=${array[index].id} name=${index} value=${answer.id}>
      ${answer.value}
      </label>
    </li>`
          )
          .join("");
      questions.innerHTML = `
      <div class="quiz-questions-item">
      <div class="quiz-questions-item__question">
        ${array[index].question}
      </div>
      <ul class="quiz-questions-item__answer">
        ${renderAnswers()}
      </ul>
    </div>
      `;
    }
    if (array[index].answers.length === 1) {
      const renderAnswers1 = () =>
        array[index].answers
          .map(
            (answer) => `
           <input type="number" class="answer-input__number" id=${array[index].id} name=${index} >
           `
          )
          .join("");
      questions.innerHTML = `
            <div class="quiz-questions-item">
            <div class="quiz-questions-item__question">
              ${array[index].question}
            </div>
            <ul class="quiz-questions-item__answer">
              ${renderAnswers1()}
            </ul>
          </div>
         
            `;
    }
  };
  const renderResults = () => {
    let content = "";
    const getClassname = (answer, questionIndex) => {
      let className = "";
      if (!answer.correct && answer.id == localResults[questionIndex]) {
        className = "answer--invalid";
        // console.log(Number(localResults[questionIndex]));
        // summ.push(Number(localResults[questionIndex]));
      }
      if (!answer.correct && answer.id == !localResults[questionIndex]) {
        className = "answer--invalid";
        //console.log(Number(localResults[questionIndex]));
        // summ.push(Number(localResults[questionIndex]));
      }
      if (answer.correct) {
        className = "answer--valid";
      }
      return className;
    };

    const getAnswers = (questionIndex) =>
      array[questionIndex].answers
        .map(
          (answer) =>
            ` <li class=${getClassname(answer, questionIndex)}>${
              answer.value
            }</li>`
        )
        .join("");

    array.forEach((question, index) => {
      content += `
     <div class="quiz-results-item">
            <div class="quiz-results-item__question">
             ${question.question}
            </div>
            <ul class="quiz-results-item__answer"> ${getAnswers(index)}</ul>
            </div> 
            <div></div>
     `;
    });
    results.innerHTML = content;
  };

  const renderIndicator = (currentStep) => {
    indicator.innerHTML = `${currentStep}/${array.length}`;
  };

  quiz.addEventListener("change", (event) => {
    //логика ответа
    let summAns = [];
    if (event.target.classList.contains("answer-input")) {
      console.log("next");
      localResults[event.target.name] = event.target.value;
      localResultsAnswer[event.target.id] = event.target.value;

      // console.log(localResults);
    }
    if (event.target.classList.contains("answer-input__number")) {
      console.log("next");

      localResults[event.target.name] = Number(event.target.value);
      localResultsAnswer[event.target.id] = Number(event.target.value);
      console.log(localResults);
      localStorage.setItem("user", JSON.stringify(localResults));
      localStorage.setItem("userAnswer", JSON.stringify(localResultsAnswer));
    }
    for (let i = 0; i < array.length; i++) {
      for (key in localResultsAnswer) {
        for (let j = 0; j < array[i].answers.length; j++) {
          if (
            array[i].id == key &&
            array[i].answers.length == 3 &&
            array[i].answers[j].id == localResultsAnswer[key] &&
            array[i].answers[j].correct == true
          ) {
            summAns.push(key);
          }
          if (
            array[i].id == key &&
            array[i].answers.length == 1 &&
            array[i].answers[j].value == localResultsAnswer[key] &&
            array[i].answers[j].correct == true
          ) {
            summAns.push(key);
          }
          console.log(summAns);
          correctAnswer.innerHTML = `Правильных ответов ${summAns.length} из ${array.length}. Ваши правильные ответы: ${summAns}`;
        }
      }
    }
  });

  quiz.addEventListener("click", (e) => {
    //вперед или сначала

    if (e.target.classList.contains("btn-next")) {
      let nextQuestionIndex = Number(questions.dataset.currentStep) + 1;
      if (array.length === nextQuestionIndex) {
        questions.hidden = true;
        indicator.hidden = true;
        results.hidden = false;
        next.hidden = true;
        restart.hidden = true;
        correctAnswer.hidden = false;
        renderResults();
      } else {
        renderQuestions(nextQuestionIndex);
        //переход к следующему вопросу
      }
      //next.disabled = true;
    }
    if (e.target.classList.contains("btn-restart")) {
      let previousQuestionIndex = Number(questions.dataset.currentStep) - 1;
      if (previousQuestionIndex < 0) {
        previousQuestionIndex = 0;
      }
      if (array.length === previousQuestionIndex) {
        questions.hidden = true;
        indicator.hidden = true;
        restart.hidden = true;
        results.hidden = false;
        next.hidden = true;

        renderResults();
      } else {
        renderQuestions(previousQuestionIndex);
        //переход к следующему вопросу
      }

      //next.disabled = true;
    }
    /* localResults = {};
      results.innerHTML = ``;
      questions.hidden = false;
      indicator.hidden = false;
      results.hidden = true;
      next.hidden = false;
      restart.hidden = true;
      renderQuestions(0);*/
          /* localResults = {};
          results.innerHTML = ``;
          questions.hidden = false;
          indicator.hidden = false;
          results.hidden = true;
          next.hidden = false;
          restart.hidden = true;
          renderQuestions(0);*/
        // console.log("restart");
    console.log("restart");
  });
  renderQuestions(0);
  let arr = JSON.parse(localStorage.getItem("user"));
  let arrAnswer = JSON.parse(localStorage.getItem("userAnswer"));

  let summAnswer = [];
  console.log(arr);
  for (let i = 0; i < array.length; i++) {
    for (key in arrAnswer) {
      for (let j = 0; j < array[i].answers.length; j++) {
        if (
          array[i].id == key &&
          array[i].answers.length == 3 &&
          array[i].answers[j].id == arrAnswer[key] &&
          array[i].answers[j].correct == true
        ) {
          summAnswer.push(key);
        }
        if (
          array[i].id == key &&
          array[i].answers.length == 1 &&
          array[i].answers[j].value == arrAnswer[key] &&
          array[i].answers[j].correct == true
        ) {
          summAnswer.push(key);
        }
      }
    }
  }
  console.log(`Правильные ответы :${summAnswer}`);
};



{/* <button data-target="#recording" class="btn"> */} 
{/* <button data-target="#login" class="btn"> */}

// btn.forEach((btn) => btn.addEventListener("click", () => location.hash = btn.dataset.target));
/*
const redirect = (event) => location.hash = event.dataset.target;

loginButton.addEventListener("click", redirect);
logout.addEventListener("click", redirect);
centralizedTesting.addEventListener("click", redirect);
eighthClass.addEventListener("click", redirect);
ninthClass.addEventListener("click", redirect);
btnExit.addEventListener("click", redirect); */


